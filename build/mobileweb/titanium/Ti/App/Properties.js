define(["Ti/_/Evented","Ti/_/lang"],function(e,t){function o(e){if(!r){var t=localStorage.getItem(n);r=require.is(t,"String")&&JSON.parse(t)||{}}return e?r[e]:r}function i(e,i,l){var a=o(e);return void 0===a?t.val(l,null):s[i]?s[i](a):a}function l(e,t,i){e&&(o(),void 0===i||null===i?delete r[e]:r[e]=s[t]?s[t](i):i,localStorage.setItem(n,JSON.stringify(r)))}var a,r,n="ti:properties",s={Bool:function(e){return!!e},Double:function(e){return parseFloat(e)},Int:function(e){return parseInt(e)},List:function(e){return require.is(e,"Array")?e:[e]},Object:function(e){return e},String:function(e){return""+e}},d=t.setObject("Ti.App.Properties",e,{hasProperty:function(e){return!!o(e)},listProperties:function(){var e,t=o(),i=[];for(e in t)i.push(e);return i},removeProperty:function(e){l(e)}});for(a in s)(function(e){d["get"+e]=function(t,o){return i(t,e,o)},d["set"+e]=function(t,o){l(t,e,o)}})(a);return d});