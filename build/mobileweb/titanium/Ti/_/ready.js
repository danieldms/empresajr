define(function(){function e(e){if(!(r||e&&"readystatechange"==e.type&&!a[o.readyState])){for(;s.length;)s.shift()();r=1}}function t(){a[o.readyState]?e():setTimeout(t,30)}function i(e,t,i){var o,n,a;if(require.is(e,"Number")||(i=t,t=e,e=1e3),o=i?function(){i.call(t)}:t,r)o();else{for(o.priority=e,n=0,a=s.length;a>n&&e>=s[n].priority;n++);s.splice(n,0,o)}}var o=document,n=require.on,a={loaded:1,complete:1},r=!!a[o.readyState],s=[];return r||(s.concat([n(o,"DOMContentLoaded",e),n(window,"load",e)]),"onreadystatechange"in o?s.push(require.on(o,"readystatechange",e)):t()),i.load=function(e,t,o){i(o)},i});