define(function(){var e={},t=[];return{dynamic:!0,normalize:function(e,t){var i=e.split("!"),o=i[0];return i.shift(),(/^\./.test(o)?t(o):o)+(i.length?"!"+i.join("!"):"")},load:function(i,o,n){var r,a,s,l,d=i.split("!"),_=d.length;if((l=_>1&&"sandbox"===d[0])&&(d.shift(),i=d.join("!")),s=o.toUrl(/^\//.test(i)?i:"./"+i,t.length?{name:t[t.length-1]}:null),r=e[s]||o.cache(s),!r){if(a=new XMLHttpRequest,a.open("GET",s,!1),a.send(null),200!==a.status)throw Error('Failed to load include "'+s+'": '+a.status);r=a.responseText}t.push(s);try{o.evaluate(e[s]=r,0,!l)}catch(c){throw c}finally{t.pop()}n(r)}}});