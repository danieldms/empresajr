define(["Ti/_/declare","Ti/_/lang"],function(e,t){function i(e){var t;return n?(t=o(e),n=null,{draggingcancel:t}):void 0}function o(e){var t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,o=t-n.x,a=i-n.y;return[{x:t,y:i,distanceX:o,distanceY:a,distance:Math.sqrt(Math.pow(o,2)+Math.pow(a,2))}]}var n,a=25;return t.setObject("Ti._.Gestures.Drag",{processTouchStartEvent:function(e){if(1==e.touches.length&&1==e.changedTouches.length){var t,a;return n={x:t=e.changedTouches[0].clientX,y:a=e.changedTouches[0].clientY},{draggingstart:o(e)}}return n?i(e):void 0},processTouchEndEvent:function(e){if(n){var t,r=Math.sqrt(Math.pow(e.changedTouches[0].clientX-n.x,2)+Math.pow(e.changedTouches[0].clientY-n.y,2));return 0===e.touches.length&&1===e.changedTouches.length&&r>a?(t=o(e),n=null,{draggingend:t}):i(e)}},processTouchMoveEvent:function(e){return n?1==e.touches.length&&1==e.changedTouches.length?{dragging:o(e)}:i(e):void 0},processTouchCancelEvent:function(e){return n&&i(e)}})});