define(["Ti/_/declare","Ti/_/lang"],function(e,t){function i(e){if(o&&2==o.length&&2==e.touches.length){var t=Math.sqrt(Math.pow(e.touches[0].clientX-e.touches[1].clientX,2)+Math.pow(e.touches[0].clientY-e.touches[1].clientY,2)),i=0,n=Date.now();return a&&(i=Math.abs(a/r-t/r)/((n-s)/1e3)),a=t,s=n,{pinch:[{scale:t/r,velocity:i}]}}}var o=null,n=null,r=null,a=null,s=null,l=100;return t.setObject("Ti._.Gestures.Pinch",{processTouchStartEvent:function(e){var t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,a=e.touches.length,s=e.changedTouches.length;1==a&&1==s?(o=[{x:t,y:i}],n=setTimeout(function(){o=null},l)):2==a&&1==s?(clearTimeout(n),o&&(o.push({x:t,y:i}),r=Math.sqrt(Math.pow(o[0].x-o[1].x,2)+Math.pow(o[0].y-o[1].y,2)))):2==a&&2==s?(o=[{x:t,y:i},{x:e.changedTouches[1].clientX,y:e.changedTouches[1].clientY}],r=Math.sqrt(Math.pow(o[0].x-o[1].x,2)+Math.pow(o[0].y-o[1].y,2))):o=null},processTouchEndEvent:function(e){var t=i(e);return o=null,t},processTouchMoveEvent:function(e){return i(e)},processTouchCancelEvent:function(){o=null}})});