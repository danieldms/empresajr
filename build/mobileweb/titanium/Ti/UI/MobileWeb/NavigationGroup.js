define(["Ti/_/css","Ti/_/declare","Ti/UI/View","Ti/UI","Ti/_/lang"],function(e,t,i,o,a){var l=a.isDef,r=o.FILL,n="TiUINavigationGroup";return t("Ti.UI.MobileWeb.NavigationGroup",i,{constructor:function(t){var i=this,a=i.constants.window=t&&t.window,l=i._navBarContainer=o.createView({height:50,width:o.FILL,layout:o._LAYOUT_CONSTRAINING_HORIZONTAL});e.add(l.domNode,n),i.layout=o._LAYOUT_CONSTRAINING_VERTICAL,l.add(i._leftContainer=o.createView({width:o.SIZE,height:"100%",left:5,right:5})),l.add(i._centerContainer=o.createView({width:o.FILL,height:"100%"})),l.add(i._rightContainer=o.createView({width:o.SIZE,height:"100%",left:5,right:5})),i._add(l),i._add(i._contentContainer=o.createView({width:r,height:r})),this.navBarAtTop=!0,l._getBorderFromCSS(),i._windows=[],a&&i.open(a)},_defaultWidth:r,_defaultHeight:r,_updateNavBar:function(){var e,t,i,a=this,l=a._windows,r=l.length,n=l[r-1],s=this._navBarContainer,d=a._leftContainer,_=a._centerContainer,c=a._rightContainer;n&&(i=n.rightNavButton,n.leftNavButton?e=n.leftNavButton:(a._backButton||(a._backButton=o.createButton({title:"Back"}),require.on(a._backButton,"singletap",function(){a.close(l[l.length-1])})),r>1&&(e=a._backButton)),d._children[0]!==e&&(d._removeAllChildren(),e&&d._add(e)),c._children[0]!==i&&(c._removeAllChildren(),i&&c._add(i)),s.backgroundColor=n.barColor,s.backgroundImage=n.barImage,s.opacity=n.translucent?.5:1,s.height=n.navBarHidden&&n.modal?0:50,t=n.titleControl?n.titleControl:n.titleImage?n._titleImageView||(n._titleImageView=o.createImageView({image:n.titleImage})):n._titleControl||(n._titleControl=o.createLabel({text:n._getTitle()||this._tab&&this._tab._getTitle()||"",width:"100%",height:"100%",textAlign:o.TEXT_ALIGNMENT_CENTER})),_._children[0]!==t&&(_._removeAllChildren(),t&&_._add(t)))},_getTopWindow:function(){var e=this._windows,t=e.length;return t?e[e.length-1]:null},open:function(e){if(!e._opened){var t=this._windows,i=this._tab;e._navGroup=this,!l(e.backgroundColor)&&!l(e.backgroundImage)&&(e.backgroundColor="#fff"),~(t.length-1)&&t[t.length-1].fireEvent("blur"),i&&(e.tabGroup=(e.tab=i)._tabGroup),t.push(e),this._contentContainer._add(e),this._updateNavBar(),e._opened||e.fireEvent("open"),e._opened=1,e.fireEvent("focus")}},close:function(e){var t=this._windows,i=t.indexOf(e),o=this;e._navGroup=void 0,i>0&&(t.splice(i,1),e.fireEvent("blur"),o._contentContainer.remove(e),e.fireEvent("close"),e._opened=0,this._updateNavBar(),t[t.length-1].fireEvent("focus"))},_reset:function(){for(var e,t=this._windows,i=t.length-1,o=i;;){if(e=t[i],!i)break;i--===o&&e.fireEvent("blur"),this._contentContainer.remove(e),e.fireEvent("close"),e._opened=0}t.splice(1),this._updateNavBar(),e.fireEvent("focus")},constants:{window:void 0,bubbleParent:!1},properties:{navBarAtTop:{set:function(t,i){if(t!==i){var o=this._navBarContainer,a=o.domNode;this._remove(o),this._insertAt(o,t?0:1),e.remove(a,n+(t?"Top":"Bottom")),e.add(a,n+(t?"Bottom":"Top"))}return t}}}})});