define(["Ti/_/declare","Ti/_/lang","Ti/_/UI/Widget","Ti/_/dom","Ti/_/style","Ti/Locale","Ti/UI","Ti/UI/ActivityIndicatorStyle"],function(e,t,i,o,r,a,n,l){var s=.3,d=r.set;return e("Ti.UI.ActivityIndicator",i,{constructor:function(){var e=this._contentContainer=n.createView({layout:n._LAYOUT_CONSTRAINING_HORIZONTAL,width:n.SIZE,height:n.SIZE});this._add(e),i.prototype.hide.call(this),e._add(this._indicatorIndicator=n.createView()),e._add(this._indicatorMessage=n.createLabel()),this._createProngs()},_createProngs:function(){var e,t=0,i=this._prongs=[],r=this._indicatorIndicator,a=r.domNode,n=this.indicatorColor,l=this.indicatorDiameter,d=l/36;for(r.width=r.height=l;a.firstChild;)a.removeChild(a.firstChild);for(e=o.create("div",{className:"TiUIActivityIndicatorProngContainer",style:{transformOrigin:"0px 0px",transform:"scale("+d+")"}},a);12>t;t++)i.push(o.create("div",{className:"TiUIActivityIndicatorProng",style:{transform:"translate(16px,0px) rotate("+30*t+"deg)",transformOrigin:"2px 18px",opacity:s,backgroundColor:n}},e))},show:function(){i.prototype.show.call(this),this._timer=setInterval(t.hitch(this,"_animate"),100)},hide:function(){clearTimeout(this._timer),i.prototype.hide.call(this)},_currentProng:0,_animate:function(){var e=this._prongs[this._currentProng];12==++this._currentProng&&(this._currentProng=0),d(e,"transition",""),setTimeout(function(){d(e,"opacity",1),setTimeout(function(){d(e,"transition","opacity 500ms linear 0ms"),setTimeout(function(){d(e,"opacity",s)},1)},1)},1)},_defaultWidth:n.SIZE,_defaultHeight:n.SIZE,_messagePadding:0,properties:{color:{set:function(e){return this._indicatorMessage.color=e}},font:{set:function(e){return this._indicatorMessage.font=e}},indicatorColor:{post:"_createProngs",value:"#fff"},indicatorDiameter:{post:"_createProngs",value:36},message:{set:function(e){var t=this._indicatorMessage;return t.left=e?5:0,t.text=e}},messageid:{set:function(e){var t=this._indicatorMessage;return t.left=e?5:0,t.textid=e}},style:{set:function(e){this.indicatorColor=~[l.DARK,l.BIG_DARK].indexOf(e)?"#444":"#fff",this.indicatorDiameter=~[l.BIG,l.BIG_DARK].indexOf(e)?72:36}}}})});