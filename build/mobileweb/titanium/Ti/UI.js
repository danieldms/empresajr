define(["Ti/_","Ti/_/Evented","Ti/_/has","Ti/_/lang","Ti/_/ready","Ti/_/style","Ti/_/dom","Ti/_/event","Ti/_/has","Ti/_/Gestures/DoubleTap","Ti/_/Gestures/Dragging","Ti/_/Gestures/LongPress","Ti/_/Gestures/Pinch","Ti/_/Gestures/SingleTap","Ti/_/Gestures/Swipe","Ti/_/Gestures/TouchCancel","Ti/_/Gestures/TouchEnd","Ti/_/Gestures/TouchMove","Ti/_/Gestures/TouchStart","Ti/_/Gestures/TwoFingerTap"],function(e,t,i,o,a,l,n,r,i,s,d,_,c,u,h,f,y,p,v,g){var I,w,b,m=window,T=document,E=T.body,C=require.on,S=require.is,k="2DMatrix,ActivityIndicator,AlertDialog,Animation,Button,EmailDialog,ImageView,Label,OptionDialog,Picker,PickerColumn,PickerRow,ProgressBar,ScrollableView,ScrollView,Slider,Switch,Tab,TabGroup,TableView,TableViewRow,TableViewSection,TextArea,TextField,View,WebView,Window",A={},x=l.set,L=navigator.userAgent.toLowerCase().match(/(iphone|android)/),U=L&&"iphone"===L[0],N={},O=function(){Ti.UI._recalculateLayout(),I=0},F=O,V=n.unitize,z=[v,y,p,f,d,u,s,_,c,h,g];return C(E,"touchmove",function(e){e.preventDefault()}),k.split(",").forEach(function(e){A["create"+e]=function(t){return new(require("Ti/UI/"+e))(t)}}),!navigator.standalone&&L&&(F=function(){if(!I){I=1;var e,t=0|require("Ti/Gesture").isPortrait,i=N[t];i||(U?(i=m.innerHeight+60,m.screen.availHeight-i>50&&(i+=50)):i=m.outerHeight/(m.devicePixelRatio||0),N[t]=i),x(E,"height",i+"px"),U?(m.scrollTo(0,0),O()):e=setInterval(function(){m.scrollTo(0,-1),m.innerHeight+1>=i&&(clearTimeout(e),O())},50)}},a(F),C(m,"orientationchange",F),C(m,"touchstart",F)),a(10,function(){setTimeout(function(){function e(e,t){var i,o,a,n=0,r=z.length,s=[],d=t._elements;if(d&&d.length){for(l||require.mix(t,{touches:"mouseup"===t.type?[]:[t],targetTouches:[],changedTouches:[t]});r>n;n++)if(a=z[n]["process"+e]){o=a(t,d);for(i in o)s[i]||(s[i]=[]),s[i]=s[i].concat(o[i])}Ti.UI._fireGestureEvents(s,d)}}var t=Ti.UI._container=Ti.UI.createView({left:0,top:0}),o=t.domNode,a=t._layoutCoefficients,l=i("touch"),n=0;a.width.x1=1,a.height.x1=1,t._measuredTop=0,t._measuredLeft=0,o.id="TiUIContainer",x(o,"overflow","hidden"),E.appendChild(o),(w=T.getElementById("splash"))&&t.addEventListener("postlayout",function(){setTimeout(function(){x(w,{position:"absolute",width:V(t._measuredWidth),height:V(t._measuredHeight),left:0,top:0,right:"",bottom:""})},10)}),F(),C(o,l?"touchstart":"mousedown",function(t){var i=[C(m,l?"touchmove":"mousemove",function(t){(l||n)&&e("TouchMoveEvent",t)}),C(m,l?"touchend":"mouseup",function(t){n=0,e("TouchEndEvent",t),r.off(i)}),l&&C(m,"touchcancel",function(t){e("TouchCancelEvent",t),r.off(i)})];n=1,e("TouchStartEvent",t)})},1)}),C(m,"resize",function(){Ti.UI._recalculateLayout()}),o.setObject("Ti.UI",t,A,{_addWindow:function(e,t){return this._container.add(e.modal?e._modalParentContainer:e),t&&this._setWindow(e),w&&n.destroy(w),e},_setWindow:function(e){this.constants.currentWindow=e},_removeWindow:function(e){return this._container.remove(e.modal?e._modalParentContainer:e),e},_fireGestureEvents:function(e,t){for(var i,o,a,l,n,r=0,s=z.length,d=0;t[d]&&!t[d]._isPublished;)d++;t[d]||(d=0);for(r in e)for(i=0,s=e[r].length;s>i;i++)n=e[r][i],S(n.x,"Number")&&S(n.y,"Number")?(l=this._container.convertPointToView({x:n.x,y:n.y},t[d]),o=l?l.x:n.x,a=l?l.y:n.y):o=a=void 0,n.x=o,n.y=a,n.bubbles=!0,n.cancelBubble=!1,t[0].fireEvent(r,n)},_layoutSemaphore:0,_nodesToLayout:[],_startLayout:function(){this._layoutSemaphore++},_finishLayout:function(){0===--this._layoutSemaphore&&this._triggerLayout(!0)},_elementLayoutCount:0,_triggerLayout:function(e,t){function o(){a._elementLayoutCount=0;var e,t,o,l,n,r,s,d,_,c,u=a._nodesToLayout,h=[],f=!1,y=a._container,p=u.length;for(i("ti-instrumentation")&&(a._layoutInstrumentationTest=instrumentation.startTest("Layout")),_=0;p>_;_++)if(e=u[_],e._isAttachedToActiveWin()){for(s=[e];s.length>0;){t=s.pop(),t._markedForLayout=!0,n=t._children;for(c in n)r=n[c],("composite"!==t.layout||r._needsMeasuring||t._layout._isDependentOnParent(r))&&s.push(r)}if(e===y)f=!0;else for(o=e;;){if(o._markedForLayout=!0,l=o,o=o._parent,d=!1,!o||o===y){f=!0;break}for(o._hasSizeDimensions()||o._needsMeasuring||(!o._markedForLayout&&!~h.indexOf(o)&&h.push(o),d=!0),s=[o];s.length>0;){t=s.pop(),n=t._children;for(c in n)r=n[c],r!==l&&("composite"!==t.layout||r._needsMeasuring||t._layout._isDependentOnParent(r))&&(r._markedForLayout=!0,s.push(r))}if(d)break}}if(f){var v=y.properties.__values__,g=y._measuredWidth=v.width=m.innerWidth,I=y._measuredHeight=v.height=m.innerHeight;y._measuredSandboxWidth=g,y._measuredSandboxHeight=I,y.fireEvent("postlayout"),x(y.domNode,{width:g+"px",height:I+"px"}),y._layout._doLayout(y,g,I,!1,!1)}for(_=0;h.length>_;_++)t=h[_],t._layout._doLayout(t,t._measuredWidth-t._borderLeftWidth-t._borderRightWidth,t._measuredHeight-t._borderTopWidth-t._borderBottomWidth,t._parent._layout._getWidth(t,t.width)===Ti.UI.SIZE,t._parent._layout._getHeight(t,t.height)===Ti.UI.SIZE);i("ti-instrumentation")&&instrumentation.stopTest(a._layoutInstrumentationTest,a._elementLayoutCount+" out of approximately "+document.getElementById("TiUIContainer").getElementsByTagName("*").length+" elements laid out."),a._layoutInProgress=!1,a._layoutTimer=null,a._nodesToLayout=[],a.fireEvent("postlayout")}var a=this;~a._nodesToLayout.indexOf(e)||(a._nodesToLayout.push(e),t?(clearTimeout(a._layoutTimer),a._layoutInProgress=!0,o()):1===a._nodesToLayout.length&&(a._layoutInProgress=!0,a._layoutTimer=setTimeout(o,10)))},_recalculateLayout:function(){b||(b=require("Ti/Gesture")),b._updateOrientation();var e=this._container;e&&(e.width=m.innerWidth,e.height=m.innerHeight)},properties:{backgroundColor:{set:function(e){return this._container.backgroundColor=e}},backgroundImage:{set:function(e){return x(E,"backgroundImage",e?l.url(e):"")}},currentTab:void 0},convertUnits:function(t,i){var o=n.computeSize(t,0,!1);switch(i){case Ti.UI.UNIT_MM:o*=10;case Ti.UI.UNIT_CM:return o/(10*.0393700787*e.dpi);case Ti.UI.UNIT_IN:return o/e.dpi;case Ti.UI.UNIT_DIP:return 96*o/e.dpi;case Ti.UI.UNIT_PX:return o;default:return 0}},constants:{currentWindow:void 0,UNKNOWN:0,FACE_DOWN:1,FACE_UP:2,PORTRAIT:3,UPSIDE_PORTRAIT:4,LANDSCAPE_LEFT:5,LANDSCAPE_RIGHT:6,INPUT_BORDERSTYLE_NONE:0,INPUT_BORDERSTYLE_LINE:1,INPUT_BORDERSTYLE_BEZEL:2,INPUT_BORDERSTYLE_ROUNDED:3,KEYBOARD_DEFAULT:2,KEYBOARD_EMAIL:3,KEYBOARD_NUMBER_PAD:6,KEYBOARD_PHONE_PAD:7,KEYBOARD_URL:8,NOTIFICATION_DURATION_LONG:1,NOTIFICATION_DURATION_SHORT:2,PICKER_TYPE_DATE:2,PICKER_TYPE_DATE_AND_TIME:3,PICKER_TYPE_PLAIN:4,PICKER_TYPE_TIME:5,RETURNKEY_DEFAULT:0,RETURNKEY_DONE:1,RETURNKEY_EMERGENCY_CALL:2,RETURNKEY_GO:3,RETURNKEY_GOOGLE:4,RETURNKEY_JOIN:5,RETURNKEY_NEXT:6,RETURNKEY_ROUTE:7,RETURNKEY_SEARCH:8,RETURNKEY_SEND:9,RETURNKEY_YAHOO:10,TEXT_ALIGNMENT_CENTER:"center",TEXT_ALIGNMENT_RIGHT:"right",TEXT_ALIGNMENT_LEFT:"left",TEXT_AUTOCAPITALIZATION_ALL:3,TEXT_AUTOCAPITALIZATION_NONE:0,TEXT_AUTOCAPITALIZATION_SENTENCES:2,TEXT_AUTOCAPITALIZATION_WORDS:1,TEXT_VERTICAL_ALIGNMENT_BOTTOM:"bottom",TEXT_VERTICAL_ALIGNMENT_CENTER:"center",TEXT_VERTICAL_ALIGNMENT_TOP:"top",ANIMATION_CURVE_EASE_IN:1,ANIMATION_CURVE_EASE_IN_OUT:0,ANIMATION_CURVE_EASE_OUT:2,ANIMATION_CURVE_LINEAR:3,SIZE:"auto",FILL:"fill",INHERIT:"inherit",UNIT_PX:"px",UNIT_MM:"mm",UNIT_CM:"cm",UNIT_IN:"in",UNIT_DIP:"dp",_LAYOUT_COMPOSITE:"composite",_LAYOUT_VERTICAL:"vertical",_LAYOUT_HORIZONTAL:"horizontal",_LAYOUT_CONSTRAINING_VERTICAL:"constrainingVertical",_LAYOUT_CONSTRAINING_HORIZONTAL:"constrainingHorizontal"}})});