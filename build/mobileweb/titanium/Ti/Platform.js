define(["Ti/_","Ti/_/browser","Ti/_/Evented","Ti/_/lang","Ti/Locale","Ti/_/dom","Ti/UI"],function(e,t,i,o,l,a,r){function n(){s||(s=1,_.cookie=d+"="+encodeURIComponent(y)+"; expires="+new Date(Date.now()+63072e7).toUTCString(),localStorage.setItem(d,y))}var s,_=document,d="ti:mid",c=_.cookie.match(RegExp("(?:^|; )"+d+"=([^;]*)")),y=c?decodeURIComponent(c[1]):void 0,u=require.on,f=a.create("iframe",{id:"urlOpener",style:{display:"none"}},_.body);y||(y=localStorage.getItem(d)),y||localStorage.setItem(d,y=e.uuid()),u(window,"beforeunload",n),u(window,"unload",n);var h=navigator,p=h.battery||h.webkitBattery||h.mozBattery,v=o.setObject("Ti.Platform",i,{canOpenURL:function(e){return!!e},createUUID:e.uuid,is24HourTimeFormat:function(){return!1},openURL:function(e){if(/^([tel|sms|mailto])/.test(e))f.contentWindow.location.href=e;else{var t=r.createWindow({layout:r._LAYOUT_CONSTRAINING_VERTICAL,backgroundColor:"#888"}),i=r.createButton({top:2,bottom:2,title:"Close"}),o=r.createWebView({width:r.FILL,height:r.FILL});i.addEventListener("singletap",function(){t.close()}),t.add(i),t.add(o),t.open(),setTimeout(function(){o.url=e},1)}},properties:{batteryMonitoring:!1},constants:{BATTERY_STATE_CHARGING:1,BATTERY_STATE_FULL:2,BATTERY_STATE_UNKNOWN:-1,BATTERY_STATE_UNPLUGGED:0,address:void 0,architecture:void 0,availableMemory:void 0,batteryLevel:function(){return this.batteryMonitoring&&p?100*p.level:-1},batteryState:function(){return this.batteryMonitoring&&p&&p.charging?this.BATTERY_STATE_CHARGING:this.BATTERY_STATE_UNKNOWN},isBrowser:!0,id:y,locale:l,macaddress:void 0,model:h.userAgent,name:"mobileweb",netmask:void 0,osname:"mobileweb",ostype:h.platform,runtime:t.runtime,processorCount:void 0,username:void 0,version:require.config.ti.version}});return p&&require.on(p,"chargingchange",function(){v.batteryMonitoring&&v.fireEvent("battery",{level:v.batteryLevel,state:v.batteryState})}),v});