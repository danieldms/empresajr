define(["Ti/_","Ti/_/browser","Ti/_/Evented","Ti/_/lang","Ti/Locale","Ti/_/dom","Ti/UI"],function(e,t,i,o,a,r,n){function l(){s||(s=1,d.cookie=_+"="+encodeURIComponent(u)+"; expires="+new Date(Date.now()+63072e7).toUTCString(),localStorage.setItem(_,u))}var s,d=document,_="ti:mid",c=d.cookie.match(RegExp("(?:^|; )"+_+"=([^;]*)")),u=c?decodeURIComponent(c[1]):void 0,f=require.on,h=r.create("iframe",{id:"urlOpener",style:{display:"none"}},d.body);u||(u=localStorage.getItem(_)),u||localStorage.setItem(_,u=e.uuid()),f(window,"beforeunload",l),f(window,"unload",l);var y=navigator,p=y.battery||y.webkitBattery||y.mozBattery,g=o.setObject("Ti.Platform",i,{canOpenURL:function(e){return!!e},createUUID:e.uuid,is24HourTimeFormat:function(){return!1},openURL:function(e){if(/^([tel|sms|mailto])/.test(e))h.contentWindow.location.href=e;else{var t=n.createWindow({layout:n._LAYOUT_CONSTRAINING_VERTICAL,backgroundColor:"#888"}),i=n.createButton({top:2,bottom:2,title:"Close"}),o=n.createWebView({width:n.FILL,height:n.FILL});i.addEventListener("singletap",function(){t.close()}),t.add(i),t.add(o),t.open(),setTimeout(function(){o.url=e},1)}},properties:{batteryMonitoring:!1},constants:{BATTERY_STATE_CHARGING:1,BATTERY_STATE_FULL:2,BATTERY_STATE_UNKNOWN:-1,BATTERY_STATE_UNPLUGGED:0,address:void 0,architecture:void 0,availableMemory:void 0,batteryLevel:function(){return this.batteryMonitoring&&p?100*p.level:-1},batteryState:function(){return this.batteryMonitoring&&p&&p.charging?this.BATTERY_STATE_CHARGING:this.BATTERY_STATE_UNKNOWN},isBrowser:!0,id:u,locale:a,macaddress:void 0,model:y.userAgent,name:"mobileweb",netmask:void 0,osname:"mobileweb",ostype:y.platform,runtime:t.runtime,processorCount:void 0,username:void 0,version:require.config.ti.version}});return p&&require.on(p,"chargingchange",function(){g.batteryMonitoring&&g.fireEvent("battery",{level:g.batteryLevel,state:g.batteryState})}),g});