define(["Ti/_","Ti/API","Ti/_/analytics","Ti/App","Ti/_/Evented","Ti/_/has","Ti/_/lang","Ti/_/ready","Ti/_/style","Ti/Buffer","Ti/Platform","Ti/UI","Ti/Locale","Ti/_/include"],function(_,API,analytics,App,Evented,has,lang,ready,style,Buffer,Platform,UI){function Empty(){}function escapeString(e){return('"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}function shutdown(){unloaded||(unloaded=1,App.fireEvent("close"),analytics.add("ti.end","ti.end"))}var global=window,req=require,cfg=req.config,deployType=App.deployType,ver=cfg.ti.version,is=req.is,on=req.on,loaded,unloaded,showingError,waiting=[],Ti=lang.setObject("Ti",Evented,{constants:{buildDate:cfg.ti.buildDate,buildHash:cfg.ti.buildHash,version:ver},properties:{userAgent:function(){return navigator.userAgent}},createBuffer:function(e){return new Buffer(e)},include:function(e){"array"==typeof e||(e=[].concat(Array.prototype.slice.call(arguments,0))),e.forEach(function(e){require("Ti/_/include!"+e)})},deferStart:function(){if(!loaded){var e=Math.round(1e12*Math.random());return waiting.push(e),function(){var t=waiting.indexOf(e);~t&&waiting.splice(t,1),loaded=1,waiting.length||(has("ti-instrumentation")&&instrumentation.stopTest(instrumentation.systemLoadTimeTest),require(cfg.main||["app.js"]))}}API.warn("app.js already loaded!")}}),loadAppjs=Ti.deferStart();if(!has("object-defineproperty")){var odp=Object.defineProperty;Object.defineProperty=function defineProperty(e,t,i){if(!e||!is(e,"Object")&&!is(e,"Function")&&!is(e,"Window"))throw new TypeError("Object.defineProperty called on non-object: "+e);if(i=i||{},!i||!is(i,"Object")&&!is(i,"Function"))throw new TypeError("Property description must be an object: "+i);if(odp)try{return odp.call(Object,e,t,i)}catch(o){}var n=Object.prototype,a=function(e,t){return e.hasOwnProperty(t)},r=a(n,"__defineGetter__"),l=e.__proto__;if(a(i,"value"))r&&(e.__lookupGetter__(t)||e.__lookupSetter__(t))?(e.__proto__=n,delete e[t],e[t]=i.value,e.__proto__=l):e[t]=i.value;else{if(!r)throw new TypeError("Getters and setters can not be defined on this javascript engine");a(i,"get")&&defineGetter(e,t,i.get),a(i,"set")?defineSetter(e,t,i.set):e[t]=null}}}if(has("function-bind")||(Function.prototype.bind=function bind(e){var t=this,i=Array.prototype.slice,o=i.call(arguments,1),n=function(){var a,r=o.concat(i.call(arguments));return this instanceof n?(a=t.apply(this,r),Object(a)===a?a:this):t.apply(e,r)};return t.prototype&&(Empty.prototype=t.prototype,n.prototype=new Empty,Empty.prototype=null),n}),!has("js-btoa")){var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",fromCharCode=String.fromCharCode;global.btoa=function(e){for(var t,i,o,n,a,r,l,s=[],d=0,_=e.length;_>d;)t=e.charCodeAt(d++),i=e.charCodeAt(d++),o=e.charCodeAt(d++),n=t>>2,a=(3&t)<<4|i>>4,r=(15&i)<<2|o>>6,l=63&o,isNaN(i)?r=l=64:isNaN(o)&&(l=64),s.push(tab.charAt(n)+tab.charAt(a)+tab.charAt(r)+tab.charAt(l));return s.join("")},global.atob=function(e){var t,i,o,n,a=[],r=0,l=e.length;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l>r;)t=tab.indexOf(e.charAt(r++)),i=tab.indexOf(e.charAt(r++)),o=tab.indexOf(e.charAt(r++)),n=tab.indexOf(e.charAt(r++)),a.push(fromCharCode(t<<2|i>>4)),64!==o&&a.push(fromCharCode((15&i)<<4|o>>2)),64!==n&&a.push(fromCharCode((3&o)<<6|n));return a.join("")}}return has("json-stringify")||(JSON.parse=function(s){return eval("("+s+")")},JSON.stringify=function(e,t,i){function o(e,n,a){var r,l,s=typeof e,d=i?n+i:"",_=i?" ":"",c=i?"\n":"",u=[];if(t&&(e=t(a,e)),"number"===s)return isFinite(e)?e+"":"null";if(is(s,"Boolean"))return e+"";if(null===e)return"null";if(is(e,"String"))return escapeString(e);if("function"===s||"undefined"===s)return void 0;if(is(e.toJSON,"Function"))return o(e.toJSON(a),n,a);if(e instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(t,i,o){var n=e["getUTC"+i]()+(o?1:0);return 10>n?"0"+n:n});if(e.valueOf()!==e)return o(e.valueOf(),n,a);if(e instanceof Array){for(a=0,l=e.length;l>a;a++){var h=e[a];r=o(h,d,a),is(r,"String")||(r="null"),u.push(c+d+r)}return"["+u.join(",")+c+n+"]"}for(a in e){var f;if(is(a,"Number"))f='"'+a+'"';else{if(!is(a,"String"))continue;f=escapeString(a)}r=o(e[a],d,a),is(r,"String")&&u.push(c+d+f+":"+_+r)}return"{"+u.join(",")+c+n+"}"}return is(t,"String")&&(i=t,t=null),o(e,"","")}),Object.defineProperty(global,"Ti",{value:Ti,writable:!1}),Object.defineProperty(global,"Titanium",{value:Ti,writable:!1}),API.info("Appcelerator Titanium "+ver+" Mobile Web"),cfg.vendorPrefixes||(cfg.vendorPrefixes=["","Moz","Webkit","O","ms"]),Ti.parse=JSON.parse,Ti.stringify=JSON.stringify,on(global,"beforeunload",shutdown),on(global,"unload",shutdown),has("ti-show-errors")&&on(global,"error",function(e){function t(e,t,i,o){s.add(UI.createLabel({color:i,font:{fontSize:o,fontWeight:"bold"},height:t,left:10,right:10,textAlign:UI.TEXT_ALIGNMENT_CENTER,text:e}))}if(!showingError){showingError=1;var i,o,n=e.filename||"",a=n.match(/:\/\/.+(\/.*)/),r=a?a[1]:e.filename,l=e.lineno,s=UI.createWindow({backgroundColor:"#f00",top:"100%",height:"100%",layout:UI._LAYOUT_CONSTRAINING_VERTICAL});t("Application Error","15%","#0f0","24pt"),t((e.message||"Unknown error").trim()+(r&&"undefined"!==r?" at "+r:"")+(l?" (line "+l+")":""),"45%","#fff","16pt"),s.add(i=UI.createView({height:"12%"})),i.add(o=UI.createButton({title:"Dismiss"})),s.addEventListener("close",function(){s.destroy()}),o.addEventListener("singletap",function(){s.animate({duration:500,top:"100%"},function(){s.close(),showingError=0})}),t("Error messages will only be displayed during development. When your app is packaged for final distribution, no error screen will appear. Test your code!","28%","#000","10pt"),on.once(s,"postlayout",function(){setTimeout(function(){s.animate({duration:500,top:0},function(){s.top=0,s.height="100%"})},100)}),s.open()}}),ready(function(){style.set(document.body,{margin:0,padding:0}),App.analytics&&(null===localStorage.getItem("ti:enrolled")&&(analytics.add("ti.enroll","ti.enroll",{app_name:App.name,oscpu:1,mac_addr:null,deploytype:deployType,ostype:Platform.osname,osarch:null,app_id:App.id,platform:Platform.name,model:Platform.model}),localStorage.setItem("ti:enrolled",!0)),analytics.add("ti.start","ti.start",{tz:(new Date).getTimezoneOffset(),deploytype:deployType,os:Platform.osname,osver:Platform.ostype,version:cfg.ti.version,platform:Platform.name,model:Platform.model,un:null,app_version:App.version,nettype:null}),analytics.send()),setTimeout(loadAppjs,1)}),Ti});