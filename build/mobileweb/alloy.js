function ucfirst(e){return e?e[0].toUpperCase()+e.substr(1):e}function addNamespace(e){return(CONST.IMPLICIT_NAMESPACES[e]||CONST.NAMESPACE_DEFAULT)+"."+e}function processStyle(e,t,o,i,l){i=i||{},i.classes=o,t.apiName&&(i.apiName=t.apiName),t.id&&(i.id=t.id),t.applyProperties(exports.createStyle(e,i,l))}function isTabletFallback(){return Math.min(Ti.Platform.displayCaps.platformHeight,Ti.Platform.displayCaps.platformWidth)>=700}var _=require("alloy/underscore")._,Backbone=require("alloy/backbone"),CONST=require("alloy/constants");exports.version="1.2.2",exports._=_,exports.Backbone=Backbone;var DEFAULT_WIDGET="widget",IDENTITY_TRANSFORM=void 0,RESET={bottom:null,left:null,right:null,top:null,height:null,width:null,shadowColor:null,shadowOffset:null,backgroundImage:null,backgroundRepeat:null,center:null,layout:null,backgroundSelectedColor:null,backgroundSelectedImage:null,opacity:1,touchEnabled:!0,enabled:!0,horizontalWrap:!0,zIndex:0,backgroundColor:null,font:null,visible:!0,color:null,transform:null,backgroundGradient:{},borderColor:"transparent",borderRadius:null,borderWidth:null};exports.M=function(e,t,o){var i,l=(t||{}).config||{},a=l.adapter||{},r={},s={};a.type?(i=require("alloy/sync/"+a.type),r.sync=function(e,t,o){i.sync(e,t,o)}):r.sync=function(e,t){Ti.API.warn("Execution of "+e+"#sync() function on a model that does not support persistence"),Ti.API.warn("model: "+JSON.stringify(t.toJSON()))},r.defaults=l.defaults,o&&(s.migrations=o),i&&_.isFunction(i.beforeModelCreate)&&(l=i.beforeModelCreate(l,e)||l);var n=Backbone.Model.extend(r,s);return n.prototype.config=l,_.isFunction(t.extendModel)&&(n=t.extendModel(n)||n),i&&_.isFunction(i.afterModelCreate)&&i.afterModelCreate(n,e),n},exports.C=function(e,t,o){var i,l={model:o},a=(o?o.prototype.config:{})||{};a.adapter&&a.adapter.type?(i=require("alloy/sync/"+a.adapter.type),l.sync=function(e,t,o){i.sync(e,t,o)}):l.sync=function(e,t){Ti.API.warn("Execution of "+e+"#sync() function on a collection that does not support persistence"),Ti.API.warn("model: "+JSON.stringify(t.toJSON()))};var r=Backbone.Collection.extend(l);return r.prototype.config=a,_.isFunction(t.extendCollection)&&(r=t.extendCollection(r)||r),i&&_.isFunction(i.afterCollectionCreate)&&i.afterCollectionCreate(r),r},exports.UI={},exports.UI.create=function(controller,apiName,opts){opts=opts||{};var baseName,ns,parts=apiName.split(".");if(1===parts.length)baseName=apiName,ns=opts.ns||CONST.IMPLICIT_NAMESPACES[baseName]||CONST.NAMESPACE_DEFAULT;else{if(!(parts.length>1))throw"Alloy.UI.create() failed: No API name was given in the second parameter";baseName=parts[parts.length-1],ns=parts.slice(0,parts.length-1).join(".")}opts.apiName=ns+"."+baseName,baseName=baseName[0].toUpperCase()+baseName.substr(1);var style=exports.createStyle(controller,opts);return eval(ns)["create"+baseName](style)},exports.createStyle=function(e,t,o){var i,l;if(!t)return{};i=_.isArray(t.classes)?t.classes.slice(0):_.isString(t.classes)?t.classes.split(/\s+/):[],l=t.apiName,l&&-1===l.indexOf(".")&&(l=addNamespace(l));var a;a=e&&_.isObject(e)?require("alloy/widgets/"+e.widgetId+"/styles/"+e.name):require("alloy/styles/"+e);var r,s,n={};for(r=0,s=a.length;s>r;r++){var d=a[r],c=d.key;if(d.isApi&&-1===c.indexOf(".")&&(c=(CONST.IMPLICIT_NAMESPACES[c]||CONST.NAMESPACE_DEFAULT)+"."+c),d.isId&&t.id&&d.key===t.id||d.isClass&&_.contains(i,d.key));else{if(!d.isApi)continue;if(-1===d.key.indexOf(".")&&(d.key=addNamespace(d.key)),d.key!==l)continue}d.queries&&d.queries.formFactor&&!Alloy[d.queries.formFactor]||_.extend(n,d.style)}var y=_.omit(t,[CONST.CLASS_PROPERTY,CONST.APINAME_PROPERTY]);return _.extend(n,y),n[CONST.CLASS_PROPERTY]=i,n[CONST.APINAME_PROPERTY]=l,o?_.defaults(n,o):n},exports.addClass=function(e,t,o,i){if(!o)return i&&t.applyProperties(i),void 0;var l=t[CONST.CLASS_PROPERTY]||[],a=l.length;o=_.isString(o)?o.split(/\s+/):o;var r=_.union(l,o||[]);return a===r.length?(i&&t.applyProperties(i),void 0):(processStyle(e,t,r,i),void 0)},exports.removeClass=function(e,t,o,i){o=o||[];var l=t[CONST.CLASS_PROPERTY]||[],a=l.length;if(!a||!o.length)return i&&t.applyProperties(i),void 0;o=_.isString(o)?o.split(/\s+/):o;var r=_.difference(l,o);return a===r.length?(i&&t.applyProperties(i),void 0):(processStyle(e,t,r,i,RESET),void 0)},exports.resetClass=function(e,t,o,i){o=o||[],o=_.isString(o)?o.split(/\s+/):o,processStyle(e,t,o,i,RESET)},exports.createWidget=function(e,t,o){return t!==void 0&&null!==t&&_.isObject(t)&&!_.isString(t)&&(o=t,t=DEFAULT_WIDGET),new(require("alloy/widgets/"+e+"/controllers/"+(t||DEFAULT_WIDGET)))(o)},exports.createController=function(e,t){return new(require("alloy/controllers/"+e))(t)},exports.createModel=function(e,t){return new(require("alloy/models/"+ucfirst(e)).Model)(t)},exports.createCollection=function(e,t){return new(require("alloy/models/"+ucfirst(e)).Collection)(t)},exports.isTablet=function(){return Math.min(Ti.Platform.displayCaps.platformHeight,Ti.Platform.displayCaps.platformWidth)>=400}(),exports.isHandheld=!exports.isTablet,exports.Globals={},exports.Models={},exports.Models.instance=function(e){return exports.Models[e]||(exports.Models[e]=exports.createModel(e))},exports.Collections={},exports.Collections.instance=function(e){return exports.Collections[e]||(exports.Collections[e]=exports.createCollection(e))},exports.CFG=require("alloy/CFG");